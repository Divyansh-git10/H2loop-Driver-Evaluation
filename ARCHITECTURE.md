# Architecture â€“ Linux Driver Evaluation System

This document explains the system design and core modules used to evaluate Linux device driver code, including LLM-generated C files.

---

## System Overview

```

Input C File (.c)
â”‚
â–¼
+---------------------+
\|  Compilation Module |
+---------------------+
â”‚
â–¼
+-------------------+      +---------------------+
\| Style Check Tool  | â—€â”€â”€â–¶ | checkpatch.pl (Perl)|
+-------------------+      +---------------------+
â”‚
â–¼
+--------------------+
\| Security Heuristics|
+--------------------+
â”‚
â–¼
+---------------------+
\|  Scoring Engine     |
+---------------------+
â”‚
â–¼
Final JSON Report â†’ `evaluation_result.json`

```

---

##  Module Breakdown

### 1.  Compilation Module

- Uses `gcc` to attempt compilation of `.c` file
- If fails: marks `"success": false`, score drops
- Warnings/errors also tracked

### 2.  Style Compliance (Kernel Coding Standards)

- Uses `checkpatch.pl` from Linux kernel
- Detects style violations (`WARNING:`/`ERROR:`)
- Outputs `style_score` from 0.0 to 1.0

### 3.  Security Heuristics Module

- Regex-based scan for:
  - Buffer safety (e.g. `strncpy`, `copy_from_user`)
  - Race condition flags (e.g. `mutex`, `spin_lock`)
  - Input validation (`if (...) return -EINVAL`)
- Each gets a fractional score (0.0â€“1.0)

### 4.  Scoring Engine

- Weighted sum of:
  - Compilation: 40%
  - Style: 20%
  - Security: 25%
  - (Advanced/Runtime/LLM bonus not scored, but documented)
- Output: `overall_score` out of 100

---

##  Bonus Modules

### ðŸ”¹ Runtime Simulation

- File: `test_driver_sim.c`
- Mimics buffer read/write to simulate user-space interaction
- Output saved in `results/runtime_test_output.txt`

### ðŸ”¹ LLM Evaluation

- Evaluates code generated by large language models
- Output saved as `evaluation_llm.json`

---

## ðŸ“„ Output Artifacts

| File | Purpose |
|------|---------|
| `evaluation_result.json` | Main score output for human-written driver |
| `evaluation_llm.json`    | Score for LLM-generated driver |
| `runtime_test_output.txt` | Output of bonus runtime test |

---

## ðŸ‘¤ Designed by

Divyansh Gautam  
ML Internship Assignment â€“ Kernel Driver Evaluator
```